<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>26 Cross Validation | Spring 2025 Semester</title>
  <meta name="description" content="26 Cross Validation | Spring 2025 Semester" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="26 Cross Validation | Spring 2025 Semester" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="26 Cross Validation | Spring 2025 Semester" />
  
  
  

<meta name="author" content="Dr. Layla Guyot" />


<meta name="date" content="2025-04-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="other-models.html"/>
<link rel="next" href="unsupervised-learning.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to SDS 322E</a></li>
<li class="chapter" data-level="2" data-path="getstarted.html"><a href="getstarted.html"><i class="fa fa-check"></i><b>2</b> getstaRted</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getstarted.html"><a href="getstarted.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives:</a></li>
<li class="chapter" data-level="2.2" data-path="getstarted.html"><a href="getstarted.html#recommended-resources"><i class="fa fa-check"></i><b>2.2</b> Recommended Resources:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>3</b> RMarkdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.1</b> Learning objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#basic-markdown-editing"><i class="fa fa-check"></i><b>3.2</b> 1. Basic Markdown editing</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#a.-headers"><i class="fa fa-check"></i><b>3.2.1</b> a. Headers</a></li>
<li class="chapter" data-level="3.2.2" data-path="rmarkdown.html"><a href="rmarkdown.html#b.-text-formatting"><i class="fa fa-check"></i><b>3.2.2</b> b. Text formatting</a></li>
<li class="chapter" data-level="3.2.3" data-path="rmarkdown.html"><a href="rmarkdown.html#c.-lists-and-bullet-points"><i class="fa fa-check"></i><b>3.2.3</b> c. Lists and bullet points</a></li>
<li class="chapter" data-level="3.2.4" data-path="rmarkdown.html"><a href="rmarkdown.html#d.-html-hyperlinks-images-tables-etc."><i class="fa fa-check"></i><b>3.2.4</b> d. HTML hyperlinks, images, tables, etc.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#embedded-r-code"><i class="fa fa-check"></i><b>3.3</b> 2. Embedded R code</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#a.-code-chunks"><i class="fa fa-check"></i><b>3.3.1</b> a. Code chunks</a></li>
<li class="chapter" data-level="3.3.2" data-path="rmarkdown.html"><a href="rmarkdown.html#b.-more-base-r-built-in-datasets"><i class="fa fa-check"></i><b>3.3.2</b> b. More base R: built-in datasets</a></li>
<li class="chapter" data-level="3.3.3" data-path="rmarkdown.html"><a href="rmarkdown.html#c.-more-base-r-basic-plots"><i class="fa fa-check"></i><b>3.3.3</b> c. More base R: basic plots</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rmarkdown.html"><a href="rmarkdown.html#packages"><i class="fa fa-check"></i><b>3.4</b> 3. Packages</a></li>
<li class="chapter" data-level="3.5" data-path="rmarkdown.html"><a href="rmarkdown.html#recommended-resources-1"><i class="fa fa-check"></i><b>3.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datasets.html"><a href="datasets.html"><i class="fa fa-check"></i><b>4</b> Datasets</a>
<ul>
<li class="chapter" data-level="4.1" data-path="datasets.html"><a href="datasets.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.1</b> Learning objectives</a></li>
<li class="chapter" data-level="4.2" data-path="datasets.html"><a href="datasets.html#set-up"><i class="fa fa-check"></i><b>4.2</b> 1. Set up</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="datasets.html"><a href="datasets.html#a.-packages"><i class="fa fa-check"></i><b>4.2.1</b> a. Packages</a></li>
<li class="chapter" data-level="4.2.2" data-path="datasets.html"><a href="datasets.html#b.-importing-datasets"><i class="fa fa-check"></i><b>4.2.2</b> b. Importing datasets</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="datasets.html"><a href="datasets.html#city-of-austin-open-data-portal"><i class="fa fa-check"></i><b>4.3</b> 2. City of Austin Open Data Portal</a></li>
<li class="chapter" data-level="4.4" data-path="datasets.html"><a href="datasets.html#other-data-sources"><i class="fa fa-check"></i><b>4.4</b> 3. Other data sources</a></li>
<li class="chapter" data-level="4.5" data-path="datasets.html"><a href="datasets.html#recommended-resources-2"><i class="fa fa-check"></i><b>4.5</b> Recommended Resources:</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html"><i class="fa fa-check"></i><b>5</b> Basic Data Manipulation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.1</b> Learning objectives</a></li>
<li class="chapter" data-level="5.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#making-sense-of-a-dataset"><i class="fa fa-check"></i><b>5.2</b> 1. Making sense of a dataset</a></li>
<li class="chapter" data-level="5.3" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#setting-conditions"><i class="fa fa-check"></i><b>5.3</b> 2. Setting conditions</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#a.-conditional-statements"><i class="fa fa-check"></i><b>5.3.1</b> a. Conditional statements</a></li>
<li class="chapter" data-level="5.3.2" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#b.-connectors"><i class="fa fa-check"></i><b>5.3.2</b> b. Connectors</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#subsetting-data"><i class="fa fa-check"></i><b>5.4</b> 3. Subsetting data</a></li>
<li class="chapter" data-level="5.5" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#creating-new-variables"><i class="fa fa-check"></i><b>5.5</b> 4. Creating new variables</a></li>
<li class="chapter" data-level="5.6" data-path="basic-data-manipulation.html"><a href="basic-data-manipulation.html#recommended-resources-3"><i class="fa fa-check"></i><b>5.6</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="grammar-graphics.html"><a href="grammar-graphics.html"><i class="fa fa-check"></i><b>6</b> Grammar Graphics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="grammar-graphics.html"><a href="grammar-graphics.html#learning-objectives-4"><i class="fa fa-check"></i><b>6.1</b> Learning objectives</a></li>
<li class="chapter" data-level="6.2" data-path="grammar-graphics.html"><a href="grammar-graphics.html#the-pipe"><i class="fa fa-check"></i><b>6.2</b> 1. The pipe</a></li>
<li class="chapter" data-level="6.3" data-path="grammar-graphics.html"><a href="grammar-graphics.html#create-a-ggplot"><i class="fa fa-check"></i><b>6.3</b> 2. Create a <code>ggplot</code></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="grammar-graphics.html"><a href="grammar-graphics.html#a.-define-a-plot"><i class="fa fa-check"></i><b>6.3.1</b> a. Define a plot</a></li>
<li class="chapter" data-level="6.3.2" data-path="grammar-graphics.html"><a href="grammar-graphics.html#b.-add-a-geometric-object"><i class="fa fa-check"></i><b>6.3.2</b> b. Add a geometric object</a></li>
<li class="chapter" data-level="6.3.3" data-path="grammar-graphics.html"><a href="grammar-graphics.html#c.-map-to-color-shape-size"><i class="fa fa-check"></i><b>6.3.3</b> c. Map to color, shape, size</a></li>
<li class="chapter" data-level="6.3.4" data-path="grammar-graphics.html"><a href="grammar-graphics.html#d.-map-variables-to-color-shape-size"><i class="fa fa-check"></i><b>6.3.4</b> d. Map variables to color, shape, size</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="grammar-graphics.html"><a href="grammar-graphics.html#layering"><i class="fa fa-check"></i><b>6.4</b> 3. Layering</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="grammar-graphics.html"><a href="grammar-graphics.html#a.-add-labels-and-controlling-scales"><i class="fa fa-check"></i><b>6.4.1</b> a. Add labels and controlling scales</a></li>
<li class="chapter" data-level="6.4.2" data-path="grammar-graphics.html"><a href="grammar-graphics.html#b.-control-scales"><i class="fa fa-check"></i><b>6.4.2</b> b. Control scales</a></li>
<li class="chapter" data-level="6.4.3" data-path="grammar-graphics.html"><a href="grammar-graphics.html#c.-facet"><i class="fa fa-check"></i><b>6.4.3</b> c. Facet</a></li>
<li class="chapter" data-level="6.4.4" data-path="grammar-graphics.html"><a href="grammar-graphics.html#d.-color-palettes-and-themes"><i class="fa fa-check"></i><b>6.4.4</b> d. Color palettes and themes</a></li>
<li class="chapter" data-level="6.4.5" data-path="grammar-graphics.html"><a href="grammar-graphics.html#e.-themes"><i class="fa fa-check"></i><b>6.4.5</b> e. Themes</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="grammar-graphics.html"><a href="grammar-graphics.html#recommended-resources-4"><i class="fa fa-check"></i><b>6.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="describing1variable.html"><a href="describing1variable.html"><i class="fa fa-check"></i><b>7</b> Describing1Variable</a>
<ul>
<li class="chapter" data-level="7.1" data-path="describing1variable.html"><a href="describing1variable.html#learning-objectives-5"><i class="fa fa-check"></i><b>7.1</b> Learning objectives</a></li>
<li class="chapter" data-level="7.2" data-path="describing1variable.html"><a href="describing1variable.html#describing-1-numeric-variable"><i class="fa fa-check"></i><b>7.2</b> 1. Describing 1 numeric variable</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="describing1variable.html"><a href="describing1variable.html#a.-histogram"><i class="fa fa-check"></i><b>7.2.1</b> a. Histogram</a></li>
<li class="chapter" data-level="7.2.2" data-path="describing1variable.html"><a href="describing1variable.html#b.-boxplot"><i class="fa fa-check"></i><b>7.2.2</b> b. Boxplot</a></li>
<li class="chapter" data-level="7.2.3" data-path="describing1variable.html"><a href="describing1variable.html#c.-density-and-violin-plots"><i class="fa fa-check"></i><b>7.2.3</b> c. Density and Violin plots</a></li>
<li class="chapter" data-level="7.2.4" data-path="describing1variable.html"><a href="describing1variable.html#d.-reporting-summary-statistics"><i class="fa fa-check"></i><b>7.2.4</b> d. Reporting summary statistics</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="describing1variable.html"><a href="describing1variable.html#describing-1-categorical-variable"><i class="fa fa-check"></i><b>7.3</b> 2. Describing 1 categorical variable</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="describing1variable.html"><a href="describing1variable.html#a.-bar-plot"><i class="fa fa-check"></i><b>7.3.1</b> a. Bar plot</a></li>
<li class="chapter" data-level="7.3.2" data-path="describing1variable.html"><a href="describing1variable.html#b.-reporting-summary-statistics"><i class="fa fa-check"></i><b>7.3.2</b> b. Reporting summary statistics</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="describing1variable.html"><a href="describing1variable.html#your-turn"><i class="fa fa-check"></i><b>7.4</b> Your turn!</a></li>
<li class="chapter" data-level="7.5" data-path="describing1variable.html"><a href="describing1variable.html#recommended-resources-5"><i class="fa fa-check"></i><b>7.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="describing-relationships.html"><a href="describing-relationships.html"><i class="fa fa-check"></i><b>8</b> Describing Relationships</a>
<ul>
<li class="chapter" data-level="8.1" data-path="describing-relationships.html"><a href="describing-relationships.html#learning-objectives-6"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="describing-relationships.html"><a href="describing-relationships.html#comparing-two-numeric-variables"><i class="fa fa-check"></i><b>8.2</b> 1. Comparing two numeric variables</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="describing-relationships.html"><a href="describing-relationships.html#a.-using-a-scatterplot"><i class="fa fa-check"></i><b>8.2.1</b> a. Using a scatterplot</a></li>
<li class="chapter" data-level="8.2.2" data-path="describing-relationships.html"><a href="describing-relationships.html#b.-reporting-correlation"><i class="fa fa-check"></i><b>8.2.2</b> b. Reporting correlation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="describing-relationships.html"><a href="describing-relationships.html#comparing-a-numeric-variable-and-a-categorical-variable"><i class="fa fa-check"></i><b>8.3</b> 2. Comparing a numeric variable and a categorical variable</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="describing-relationships.html"><a href="describing-relationships.html#a.-using-grouped-boxplots"><i class="fa fa-check"></i><b>8.3.1</b> a. Using grouped boxplots</a></li>
<li class="chapter" data-level="8.3.2" data-path="describing-relationships.html"><a href="describing-relationships.html#b.-using-grouped-histograms"><i class="fa fa-check"></i><b>8.3.2</b> b. Using grouped histograms</a></li>
<li class="chapter" data-level="8.3.3" data-path="describing-relationships.html"><a href="describing-relationships.html#c.-reporting-center-and-spread-for-each-category"><i class="fa fa-check"></i><b>8.3.3</b> c. Reporting center and spread for each category</a></li>
<li class="chapter" data-level="8.3.4" data-path="describing-relationships.html"><a href="describing-relationships.html#d.-using-a-special-case-of-bar-graph"><i class="fa fa-check"></i><b>8.3.4</b> d. Using a special case of bar graph</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="describing-relationships.html"><a href="describing-relationships.html#comparing-two-categorical-variables"><i class="fa fa-check"></i><b>8.4</b> 3. Comparing two categorical variables</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="describing-relationships.html"><a href="describing-relationships.html#a.-using-a-stacked-plot-not-usually-recommended"><i class="fa fa-check"></i><b>8.4.1</b> a. Using a stacked plot (not usually recommended)</a></li>
<li class="chapter" data-level="8.4.2" data-path="describing-relationships.html"><a href="describing-relationships.html#b.-using-a-segmented-bar-plot-usually-preferred"><i class="fa fa-check"></i><b>8.4.2</b> b. Using a segmented bar plot (usually preferred)</a></li>
<li class="chapter" data-level="8.4.3" data-path="describing-relationships.html"><a href="describing-relationships.html#c.-reporting-frequencies-and-relative-frequencies"><i class="fa fa-check"></i><b>8.4.3</b> c. Reporting frequencies and relative frequencies</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="describing-relationships.html"><a href="describing-relationships.html#relationships-with-more-than-2-variables"><i class="fa fa-check"></i><b>8.5</b> 4. Relationships with more than 2 variables</a></li>
<li class="chapter" data-level="8.6" data-path="describing-relationships.html"><a href="describing-relationships.html#recommended-resources-6"><i class="fa fa-check"></i><b>8.6</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>9</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="9.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-objectives-7"><i class="fa fa-check"></i><b>9.1</b> Learning objectives</a></li>
<li class="chapter" data-level="9.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#gather-some-background-information"><i class="fa fa-check"></i><b>9.2</b> 1. Gather some background information</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a.-context"><i class="fa fa-check"></i><b>9.2.1</b> a. Context</a></li>
<li class="chapter" data-level="9.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#b.-structure"><i class="fa fa-check"></i><b>9.2.2</b> b. Structure</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#formulate-some-research-questions"><i class="fa fa-check"></i><b>9.3</b> 2. Formulate some research questions</a></li>
<li class="chapter" data-level="9.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#investigate-trends-and-relationships"><i class="fa fa-check"></i><b>9.4</b> 3. Investigate trends and relationships</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a.-first-look-at-univariate-distributions"><i class="fa fa-check"></i><b>9.4.1</b> a. First look at univariate distributions</a></li>
<li class="chapter" data-level="9.4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#b.-then-look-at-relationships"><i class="fa fa-check"></i><b>9.4.2</b> b. Then look at relationships</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#answer-the-questions-and-be-critical"><i class="fa fa-check"></i><b>9.5</b> 4. Answer the questions and be critical</a></li>
<li class="chapter" data-level="9.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#your-turn-1"><i class="fa fa-check"></i><b>9.6</b> Your turn!</a></li>
<li class="chapter" data-level="9.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#recommended-resources-7"><i class="fa fa-check"></i><b>9.7</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html"><i class="fa fa-check"></i><b>10</b> Grammar Data Wrangling</a>
<ul>
<li class="chapter" data-level="10.1" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#learning-objectives-8"><i class="fa fa-check"></i><b>10.1</b> Learning objectives</a></li>
<li class="chapter" data-level="10.2" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#operations-on-rowsobservations"><i class="fa fa-check"></i><b>10.2</b> 1. Operations on rows/observations</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#a.-filter"><i class="fa fa-check"></i><b>10.2.1</b> a. Filter</a></li>
<li class="chapter" data-level="10.2.2" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#b.-arrange"><i class="fa fa-check"></i><b>10.2.2</b> b. Arrange</a></li>
<li class="chapter" data-level="10.2.3" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#c.-minimummaximum-values"><i class="fa fa-check"></i><b>10.2.3</b> c. Minimum/Maximum values</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#operations-on-columns"><i class="fa fa-check"></i><b>10.3</b> 2. Operations on columns</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#a.-select"><i class="fa fa-check"></i><b>10.3.1</b> a. Select</a></li>
<li class="chapter" data-level="10.3.2" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#b.-mutate"><i class="fa fa-check"></i><b>10.3.2</b> b. Mutate</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#create-summaries"><i class="fa fa-check"></i><b>10.4</b> 3. Create summaries</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#a.-summarize"><i class="fa fa-check"></i><b>10.4.1</b> a. Summarize</a></li>
<li class="chapter" data-level="10.4.2" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#b.-group-by"><i class="fa fa-check"></i><b>10.4.2</b> b. Group by</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="grammar-data-wrangling.html"><a href="grammar-data-wrangling.html#recommended-resources-8"><i class="fa fa-check"></i><b>10.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="joining.html"><a href="joining.html"><i class="fa fa-check"></i><b>11</b> Joining</a>
<ul>
<li class="chapter" data-level="11.1" data-path="joining.html"><a href="joining.html#learning-objectives-9"><i class="fa fa-check"></i><b>11.1</b> Learning objectives</a></li>
<li class="chapter" data-level="11.2" data-path="joining.html"><a href="joining.html#joining-datasets"><i class="fa fa-check"></i><b>11.2</b> 1. Joining datasets</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="joining.html"><a href="joining.html#a.-inner-join"><i class="fa fa-check"></i><b>11.2.1</b> a. Inner join</a></li>
<li class="chapter" data-level="11.2.2" data-path="joining.html"><a href="joining.html#b.-left-join"><i class="fa fa-check"></i><b>11.2.2</b> b. Left join</a></li>
<li class="chapter" data-level="11.2.3" data-path="joining.html"><a href="joining.html#c.-right-join"><i class="fa fa-check"></i><b>11.2.3</b> c. Right join</a></li>
<li class="chapter" data-level="11.2.4" data-path="joining.html"><a href="joining.html#d.-full-join"><i class="fa fa-check"></i><b>11.2.4</b> d. Full join</a></li>
<li class="chapter" data-level="11.2.5" data-path="joining.html"><a href="joining.html#e.-anti-join"><i class="fa fa-check"></i><b>11.2.5</b> e. Anti join</a></li>
<li class="chapter" data-level="11.2.6" data-path="joining.html"><a href="joining.html#f.-semi-join"><i class="fa fa-check"></i><b>11.2.6</b> f. Semi join</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="joining.html"><a href="joining.html#considering-other-options-when-joining"><i class="fa fa-check"></i><b>11.3</b> 2. Considering other options when joining</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="joining.html"><a href="joining.html#a.-no-matching-key"><i class="fa fa-check"></i><b>11.3.1</b> a. No matching key</a></li>
<li class="chapter" data-level="11.3.2" data-path="joining.html"><a href="joining.html#b.-auto-suffixing"><i class="fa fa-check"></i><b>11.3.2</b> b. Auto-suffixing</a></li>
<li class="chapter" data-level="11.3.3" data-path="joining.html"><a href="joining.html#c.-duplicates"><i class="fa fa-check"></i><b>11.3.3</b> c. Duplicates</a></li>
<li class="chapter" data-level="11.3.4" data-path="joining.html"><a href="joining.html#d.-several-key-variables"><i class="fa fa-check"></i><b>11.3.4</b> d. Several key variables</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="joining.html"><a href="joining.html#recommended-resources-9"><i class="fa fa-check"></i><b>11.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>12</b> Tidying</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tidying.html"><a href="tidying.html#learning-objectives-10"><i class="fa fa-check"></i><b>12.1</b> Learning objectives</a></li>
<li class="chapter" data-level="12.2" data-path="tidying.html"><a href="tidying.html#pivoting"><i class="fa fa-check"></i><b>12.2</b> 1. Pivoting</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="tidying.html"><a href="tidying.html#a.-wide-to-long"><i class="fa fa-check"></i><b>12.2.1</b> a. Wide to long</a></li>
<li class="chapter" data-level="12.2.2" data-path="tidying.html"><a href="tidying.html#b.-long-to-wide"><i class="fa fa-check"></i><b>12.2.2</b> b. Long to wide</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="tidying.html"><a href="tidying.html#separating-or-uniting-variables"><i class="fa fa-check"></i><b>12.3</b> 2. Separating or uniting variables</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="tidying.html"><a href="tidying.html#a.-separate"><i class="fa fa-check"></i><b>12.3.1</b> a. Separate</a></li>
<li class="chapter" data-level="12.3.2" data-path="tidying.html"><a href="tidying.html#b.-unite"><i class="fa fa-check"></i><b>12.3.2</b> b. Unite</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="tidying.html"><a href="tidying.html#your-turn-2"><i class="fa fa-check"></i><b>12.4</b> Your turn!</a></li>
<li class="chapter" data-level="12.5" data-path="tidying.html"><a href="tidying.html#recommended-resources-10"><i class="fa fa-check"></i><b>12.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html"><i class="fa fa-check"></i><b>13</b> Strings Reg Ex</a>
<ul>
<li class="chapter" data-level="13.1" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#learning-objectives-11"><i class="fa fa-check"></i><b>13.1</b> Learning objectives</a></li>
<li class="chapter" data-level="13.2" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#strings"><i class="fa fa-check"></i><b>13.2</b> 1. Strings</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#a.-calculating-length"><i class="fa fa-check"></i><b>13.2.1</b> a. Calculating length</a></li>
<li class="chapter" data-level="13.2.2" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#b.-combining-strings"><i class="fa fa-check"></i><b>13.2.2</b> b. Combining strings</a></li>
<li class="chapter" data-level="13.2.3" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#c.-changing-cases"><i class="fa fa-check"></i><b>13.2.3</b> c. Changing cases</a></li>
<li class="chapter" data-level="13.2.4" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#d.-subsetting-strings"><i class="fa fa-check"></i><b>13.2.4</b> d. Subsetting strings</a></li>
<li class="chapter" data-level="13.2.5" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#e.-finding-exact-matches-in-strings"><i class="fa fa-check"></i><b>13.2.5</b> e. Finding (exact) matches in strings</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#regular-expressions-regex"><i class="fa fa-check"></i><b>13.3</b> 2. Regular expressions (Regex)</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#a.-wildcards"><i class="fa fa-check"></i><b>13.3.1</b> a. Wildcards</a></li>
<li class="chapter" data-level="13.3.2" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#b.-anchors"><i class="fa fa-check"></i><b>13.3.2</b> b. Anchors</a></li>
<li class="chapter" data-level="13.3.3" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#c.-flexible-patterns"><i class="fa fa-check"></i><b>13.3.3</b> c. Flexible patterns</a></li>
<li class="chapter" data-level="13.3.4" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#d.-special-characters"><i class="fa fa-check"></i><b>13.3.4</b> d. Special characters</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="strings-reg-ex.html"><a href="strings-reg-ex.html#recommended-resources-11"><i class="fa fa-check"></i><b>13.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dates-times.html"><a href="dates-times.html"><i class="fa fa-check"></i><b>14</b> Dates Times</a>
<ul>
<li class="chapter" data-level="14.1" data-path="dates-times.html"><a href="dates-times.html#learning-objectives-12"><i class="fa fa-check"></i><b>14.1</b> Learning objectives</a></li>
<li class="chapter" data-level="14.2" data-path="dates-times.html"><a href="dates-times.html#parsing-dates-and-times"><i class="fa fa-check"></i><b>14.2</b> 1. Parsing dates and times</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="dates-times.html"><a href="dates-times.html#a.-r-formats"><i class="fa fa-check"></i><b>14.2.1</b> a. R formats</a></li>
<li class="chapter" data-level="14.2.2" data-path="dates-times.html"><a href="dates-times.html#b.-combining-datetime-components"><i class="fa fa-check"></i><b>14.2.2</b> b. Combining date/time components</a></li>
<li class="chapter" data-level="14.2.3" data-path="dates-times.html"><a href="dates-times.html#c.-extracting-parts-of-the-date"><i class="fa fa-check"></i><b>14.2.3</b> c. Extracting part(s) of the date</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="dates-times.html"><a href="dates-times.html#manipulating-dates-and-times"><i class="fa fa-check"></i><b>14.3</b> 2. Manipulating dates and times</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="dates-times.html"><a href="dates-times.html#a.-finding-differences-between-dates-and-times"><i class="fa fa-check"></i><b>14.3.1</b> a. Finding differences between dates and times</a></li>
<li class="chapter" data-level="14.3.2" data-path="dates-times.html"><a href="dates-times.html#b.-summarizing-datetime-data"><i class="fa fa-check"></i><b>14.3.2</b> b. Summarizing date/time data</a></li>
<li class="chapter" data-level="14.3.3" data-path="dates-times.html"><a href="dates-times.html#c.-a-few-remarks"><i class="fa fa-check"></i><b>14.3.3</b> c. A few remarks</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="dates-times.html"><a href="dates-times.html#recommended-resources-12"><i class="fa fa-check"></i><b>14.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="recoding.html"><a href="recoding.html"><i class="fa fa-check"></i><b>15</b> Recoding</a>
<ul>
<li class="chapter" data-level="15.1" data-path="recoding.html"><a href="recoding.html#learning-objectives-13"><i class="fa fa-check"></i><b>15.1</b> Learning objectives</a></li>
<li class="chapter" data-level="15.2" data-path="recoding.html"><a href="recoding.html#consider-numeric-variables-as-categorical-variables"><i class="fa fa-check"></i><b>15.2</b> 1. Consider numeric variables as categorical variables</a></li>
<li class="chapter" data-level="15.3" data-path="recoding.html"><a href="recoding.html#consider-a-log-transformations-for-numeric-variables-that-are-highly-skewed"><i class="fa fa-check"></i><b>15.3</b> 2. Consider a log-transformations for numeric variables that are highly skewed</a></li>
<li class="chapter" data-level="15.4" data-path="recoding.html"><a href="recoding.html#recoding-categories"><i class="fa fa-check"></i><b>15.4</b> 3. Recoding categories</a></li>
<li class="chapter" data-level="15.5" data-path="recoding.html"><a href="recoding.html#your-turn-3"><i class="fa fa-check"></i><b>15.5</b> Your turn!</a></li>
<li class="chapter" data-level="15.6" data-path="recoding.html"><a href="recoding.html#recommended-resources-13"><i class="fa fa-check"></i><b>15.6</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html"><i class="fa fa-check"></i><b>16</b> Missing Data Extreme</a>
<ul>
<li class="chapter" data-level="16.1" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#learning-objectives-14"><i class="fa fa-check"></i><b>16.1</b> Learning objectives</a></li>
<li class="chapter" data-level="16.2" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#missing-data"><i class="fa fa-check"></i><b>16.2</b> 1. Missing data</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#a.-r-messages"><i class="fa fa-check"></i><b>16.2.1</b> a. R messages</a></li>
<li class="chapter" data-level="16.2.2" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#b.-making-sense-of-the-structure"><i class="fa fa-check"></i><b>16.2.2</b> b. Making sense of the structure</a></li>
<li class="chapter" data-level="16.2.3" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#c.-handling-missing-values"><i class="fa fa-check"></i><b>16.2.3</b> c. Handling missing values</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#extreme-values"><i class="fa fa-check"></i><b>16.3</b> 2. Extreme values</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#a.-checking-extreme-values"><i class="fa fa-check"></i><b>16.3.1</b> a. Checking extreme values</a></li>
<li class="chapter" data-level="16.3.2" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#b.-representing-extreme-values"><i class="fa fa-check"></i><b>16.3.2</b> b. Representing extreme values</a></li>
<li class="chapter" data-level="16.3.3" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#c.-handling-extreme-values"><i class="fa fa-check"></i><b>16.3.3</b> c. Handling extreme values</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="missing-data-extreme.html"><a href="missing-data-extreme.html#recommended-resources-14"><i class="fa fa-check"></i><b>16.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>17</b> Web Scraping</a>
<ul>
<li class="chapter" data-level="17.1" data-path="web-scraping.html"><a href="web-scraping.html#learning-objectives-15"><i class="fa fa-check"></i><b>17.1</b> Learning objectives</a></li>
<li class="chapter" data-level="17.2" data-path="web-scraping.html"><a href="web-scraping.html#web-scraping-data-with-code"><i class="fa fa-check"></i><b>17.2</b> 1. Web scraping data with code</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="web-scraping.html"><a href="web-scraping.html#a.-using-element-tags"><i class="fa fa-check"></i><b>17.2.1</b> a. Using element tags</a></li>
<li class="chapter" data-level="17.2.2" data-path="web-scraping.html"><a href="web-scraping.html#b.-using-element-types"><i class="fa fa-check"></i><b>17.2.2</b> b. Using element types</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="web-scraping.html"><a href="web-scraping.html#web-scraping-and-ethics"><i class="fa fa-check"></i><b>17.3</b> 2. Web scraping and ethics</a></li>
<li class="chapter" data-level="17.4" data-path="web-scraping.html"><a href="web-scraping.html#recommended-resources-15"><i class="fa fa-check"></i><b>17.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>18</b> Text Mining</a>
<ul>
<li class="chapter" data-level="18.1" data-path="text-mining.html"><a href="text-mining.html#learning-objectives-16"><i class="fa fa-check"></i><b>18.1</b> Learning objectives</a></li>
<li class="chapter" data-level="18.2" data-path="text-mining.html"><a href="text-mining.html#text-data"><i class="fa fa-check"></i><b>18.2</b> 1. Text data</a></li>
<li class="chapter" data-level="18.3" data-path="text-mining.html"><a href="text-mining.html#stop-words"><i class="fa fa-check"></i><b>18.3</b> 2. Stop words</a></li>
<li class="chapter" data-level="18.4" data-path="text-mining.html"><a href="text-mining.html#word-clouds"><i class="fa fa-check"></i><b>18.4</b> 3. Word Clouds</a></li>
<li class="chapter" data-level="18.5" data-path="text-mining.html"><a href="text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>18.5</b> 4. Sentiment analysis</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="text-mining.html"><a href="text-mining.html#a.-positivenegative-sentiments"><i class="fa fa-check"></i><b>18.5.1</b> a. Positive/Negative sentiments</a></li>
<li class="chapter" data-level="18.5.2" data-path="text-mining.html"><a href="text-mining.html#b.-scoring-sentiments"><i class="fa fa-check"></i><b>18.5.2</b> b. Scoring sentiments</a></li>
<li class="chapter" data-level="18.5.3" data-path="text-mining.html"><a href="text-mining.html#c.-using-a-wide-range-of-sentiments"><i class="fa fa-check"></i><b>18.5.3</b> c. Using a wide range of sentiments</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="text-mining.html"><a href="text-mining.html#recommended-resources-16"><i class="fa fa-check"></i><b>18.6</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html"><i class="fa fa-check"></i><b>19</b> Sentiment Analysis</a>
<ul>
<li class="chapter" data-level="19.1" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html#learning-objectives-17"><i class="fa fa-check"></i><b>19.1</b> Learning objectives</a></li>
<li class="chapter" data-level="19.2" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html#positivenegative-sentiments"><i class="fa fa-check"></i><b>19.2</b> 1. Positive/Negative sentiments</a></li>
<li class="chapter" data-level="19.3" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html#scoring-sentiments"><i class="fa fa-check"></i><b>19.3</b> 2. Scoring sentiments</a></li>
<li class="chapter" data-level="19.4" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html#using-a-wide-range-of-sentiments"><i class="fa fa-check"></i><b>19.4</b> 3. Using a wide range of sentiments</a></li>
<li class="chapter" data-level="19.5" data-path="sentiment-analysis-1.html"><a href="sentiment-analysis-1.html#recommended-resources-17"><i class="fa fa-check"></i><b>19.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>20</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="20.1" data-path="supervised-learning.html"><a href="supervised-learning.html#learning-objectives-18"><i class="fa fa-check"></i><b>20.1</b> Learning objectives</a></li>
<li class="chapter" data-level="20.2" data-path="supervised-learning.html"><a href="supervised-learning.html#defining-a-model"><i class="fa fa-check"></i><b>20.2</b> 1. Defining a model</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#a.-a-model-with-no-predictor"><i class="fa fa-check"></i><b>20.2.1</b> a. A model with no predictor</a></li>
<li class="chapter" data-level="20.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#b.-some-models-with-one-predictor"><i class="fa fa-check"></i><b>20.2.2</b> b. Some models with one predictor</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="supervised-learning.html"><a href="supervised-learning.html#comparing-models"><i class="fa fa-check"></i><b>20.3</b> 2. Comparing models</a></li>
<li class="chapter" data-level="20.4" data-path="supervised-learning.html"><a href="supervised-learning.html#recommended-resources-18"><i class="fa fa-check"></i><b>20.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>21</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="21.1" data-path="linear-regression.html"><a href="linear-regression.html#learning-objectives-19"><i class="fa fa-check"></i><b>21.1</b> Learning objectives</a></li>
<li class="chapter" data-level="21.2" data-path="linear-regression.html"><a href="linear-regression.html#predicting-a-numeric-response-with-a-numeric-predictor"><i class="fa fa-check"></i><b>21.2</b> 1. Predicting a numeric response with a numeric predictor</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="linear-regression.html"><a href="linear-regression.html#a.-visualizing-the-model"><i class="fa fa-check"></i><b>21.2.1</b> a. Visualizing the model</a></li>
<li class="chapter" data-level="21.2.2" data-path="linear-regression.html"><a href="linear-regression.html#b.-fitting-a-model"><i class="fa fa-check"></i><b>21.2.2</b> b. Fitting a model</a></li>
<li class="chapter" data-level="21.2.3" data-path="linear-regression.html"><a href="linear-regression.html#c.-predicting-values"><i class="fa fa-check"></i><b>21.2.3</b> c. Predicting values</a></li>
<li class="chapter" data-level="21.2.4" data-path="linear-regression.html"><a href="linear-regression.html#d.-residuals"><i class="fa fa-check"></i><b>21.2.4</b> d. Residuals</a></li>
<li class="chapter" data-level="21.2.5" data-path="linear-regression.html"><a href="linear-regression.html#e.-performance"><i class="fa fa-check"></i><b>21.2.5</b> e. Performance</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="linear-regression.html"><a href="linear-regression.html#using-a-categorical-predictor"><i class="fa fa-check"></i><b>21.3</b> 2. Using a categorical predictor</a></li>
<li class="chapter" data-level="21.4" data-path="linear-regression.html"><a href="linear-regression.html#using-multiple-predictors"><i class="fa fa-check"></i><b>21.4</b> 3. Using multiple predictors</a></li>
<li class="chapter" data-level="21.5" data-path="linear-regression.html"><a href="linear-regression.html#recommended-resources-19"><i class="fa fa-check"></i><b>21.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="model-selection.html"><a href="model-selection.html"><i class="fa fa-check"></i><b>22</b> Model Selection</a>
<ul>
<li class="chapter" data-level="22.1" data-path="model-selection.html"><a href="model-selection.html#learning-objectives-20"><i class="fa fa-check"></i><b>22.1</b> Learning objectives</a></li>
<li class="chapter" data-level="22.2" data-path="model-selection.html"><a href="model-selection.html#choosing-predictors"><i class="fa fa-check"></i><b>22.2</b> 1. Choosing predictors</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="model-selection.html"><a href="model-selection.html#a.-predictors-that-do-not-make-sense"><i class="fa fa-check"></i><b>22.2.1</b> a. Predictors that do not make sense</a></li>
<li class="chapter" data-level="22.2.2" data-path="model-selection.html"><a href="model-selection.html#b.-exploring-relationships"><i class="fa fa-check"></i><b>22.2.2</b> b. Exploring relationships</a></li>
<li class="chapter" data-level="22.2.3" data-path="model-selection.html"><a href="model-selection.html#c.-model-fit-and-predictions"><i class="fa fa-check"></i><b>22.2.3</b> c. Model fit and predictions</a></li>
<li class="chapter" data-level="22.2.4" data-path="model-selection.html"><a href="model-selection.html#d.-performance"><i class="fa fa-check"></i><b>22.2.4</b> d. Performance</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="model-selection.html"><a href="model-selection.html#comparing-models-1"><i class="fa fa-check"></i><b>22.3</b> 2. Comparing models</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="model-selection.html"><a href="model-selection.html#a.-using-multiple-predictors"><i class="fa fa-check"></i><b>22.3.1</b> a. Using multiple predictors</a></li>
<li class="chapter" data-level="22.3.2" data-path="model-selection.html"><a href="model-selection.html#b.-testing-for-new-data"><i class="fa fa-check"></i><b>22.3.2</b> b. Testing for “new” data</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="model-selection.html"><a href="model-selection.html#recommended-resources-20"><i class="fa fa-check"></i><b>22.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction-classification.html"><a href="introduction-classification.html"><i class="fa fa-check"></i><b>23</b> Introduction Classification</a>
<ul>
<li class="chapter" data-level="23.1" data-path="introduction-classification.html"><a href="introduction-classification.html#learning-objectives-21"><i class="fa fa-check"></i><b>23.1</b> Learning objectives</a></li>
<li class="chapter" data-level="23.2" data-path="introduction-classification.html"><a href="introduction-classification.html#basic-classifications"><i class="fa fa-check"></i><b>23.2</b> 1. Basic classifications</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="introduction-classification.html"><a href="introduction-classification.html#a.-random-classification"><i class="fa fa-check"></i><b>23.2.1</b> a. Random classification</a></li>
<li class="chapter" data-level="23.2.2" data-path="introduction-classification.html"><a href="introduction-classification.html#b.-classification-based-on-1-variable"><i class="fa fa-check"></i><b>23.2.2</b> b. Classification based on 1 variable</a></li>
<li class="chapter" data-level="23.2.3" data-path="introduction-classification.html"><a href="introduction-classification.html#c.-classification-based-on-any-cutoff-value"><i class="fa fa-check"></i><b>23.2.3</b> c. Classification based on any cutoff value</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="introduction-classification.html"><a href="introduction-classification.html#metrics"><i class="fa fa-check"></i><b>23.3</b> 2. Metrics</a></li>
<li class="chapter" data-level="23.4" data-path="introduction-classification.html"><a href="introduction-classification.html#rocauc"><i class="fa fa-check"></i><b>23.4</b> 3. ROC/AUC</a>
<ul>
<li class="chapter" data-level="23.4.1" data-path="introduction-classification.html"><a href="introduction-classification.html#a.-receiver-operating-characteristics-roc-curve"><i class="fa fa-check"></i><b>23.4.1</b> a. Receiver Operating Characteristics (ROC) curve</a></li>
<li class="chapter" data-level="23.4.2" data-path="introduction-classification.html"><a href="introduction-classification.html#b.-area-under-the-curve-auc"><i class="fa fa-check"></i><b>23.4.2</b> b. Area under the curve (AUC)</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="introduction-classification.html"><a href="introduction-classification.html#recommended-resources-21"><i class="fa fa-check"></i><b>23.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>24</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="24.1" data-path="logistic-regression.html"><a href="logistic-regression.html#learning-objectives-22"><i class="fa fa-check"></i><b>24.1</b> Learning objectives</a></li>
<li class="chapter" data-level="24.2" data-path="logistic-regression.html"><a href="logistic-regression.html#predicting-a-binary-response-with-a-numeric-predictor"><i class="fa fa-check"></i><b>24.2</b> 1. Predicting a binary response with a numeric predictor</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="logistic-regression.html"><a href="logistic-regression.html#a.-visualizing-the-model-1"><i class="fa fa-check"></i><b>24.2.1</b> a. Visualizing the model</a></li>
<li class="chapter" data-level="24.2.2" data-path="logistic-regression.html"><a href="logistic-regression.html#b.-fitting-a-model-1"><i class="fa fa-check"></i><b>24.2.2</b> b. Fitting a model</a></li>
<li class="chapter" data-level="24.2.3" data-path="logistic-regression.html"><a href="logistic-regression.html#c.-making-predictions"><i class="fa fa-check"></i><b>24.2.3</b> c. Making predictions</a></li>
<li class="chapter" data-level="24.2.4" data-path="logistic-regression.html"><a href="logistic-regression.html#d.-error-in-predicted-values"><i class="fa fa-check"></i><b>24.2.4</b> d. Error in predicted values</a></li>
<li class="chapter" data-level="24.2.5" data-path="logistic-regression.html"><a href="logistic-regression.html#e.-performance-1"><i class="fa fa-check"></i><b>24.2.5</b> e. Performance</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="logistic-regression.html"><a href="logistic-regression.html#using-multiple-predictors-1"><i class="fa fa-check"></i><b>24.3</b> 2. Using multiple predictors</a></li>
<li class="chapter" data-level="24.4" data-path="logistic-regression.html"><a href="logistic-regression.html#recommended-resources-22"><i class="fa fa-check"></i><b>24.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="other-models.html"><a href="other-models.html"><i class="fa fa-check"></i><b>25</b> Other Models</a>
<ul>
<li class="chapter" data-level="25.1" data-path="other-models.html"><a href="other-models.html#learning-objectives-23"><i class="fa fa-check"></i><b>25.1</b> Learning objectives</a></li>
<li class="chapter" data-level="25.2" data-path="other-models.html"><a href="other-models.html#decision-trees-for-a-numeric-outcome"><i class="fa fa-check"></i><b>25.2</b> 1. Decision trees for a numeric outcome</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="other-models.html"><a href="other-models.html#a.-fitting-a-model"><i class="fa fa-check"></i><b>25.2.1</b> a. Fitting a model</a></li>
<li class="chapter" data-level="25.2.2" data-path="other-models.html"><a href="other-models.html#b.-visualizing-the-model"><i class="fa fa-check"></i><b>25.2.2</b> b. Visualizing the model</a></li>
<li class="chapter" data-level="25.2.3" data-path="other-models.html"><a href="other-models.html#c.-making-predictions-1"><i class="fa fa-check"></i><b>25.2.3</b> c. Making predictions</a></li>
<li class="chapter" data-level="25.2.4" data-path="other-models.html"><a href="other-models.html#d.-evaluating-performance"><i class="fa fa-check"></i><b>25.2.4</b> d. Evaluating performance</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="other-models.html"><a href="other-models.html#decision-trees-for-a-categorical-outcome"><i class="fa fa-check"></i><b>25.3</b> 2. Decision trees for a categorical outcome</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="other-models.html"><a href="other-models.html#a.-fitting-a-model-1"><i class="fa fa-check"></i><b>25.3.1</b> a. Fitting a model</a></li>
<li class="chapter" data-level="25.3.2" data-path="other-models.html"><a href="other-models.html#b.-visualizing-the-model-1"><i class="fa fa-check"></i><b>25.3.2</b> b. Visualizing the model</a></li>
<li class="chapter" data-level="25.3.3" data-path="other-models.html"><a href="other-models.html#c.-making-predictions-2"><i class="fa fa-check"></i><b>25.3.3</b> c. Making predictions</a></li>
<li class="chapter" data-level="25.3.4" data-path="other-models.html"><a href="other-models.html#d.-evaluating-performance-1"><i class="fa fa-check"></i><b>25.3.4</b> d. Evaluating performance</a></li>
<li class="chapter" data-level="25.3.5" data-path="other-models.html"><a href="other-models.html#e.-predicting-more-than-2-outcomes"><i class="fa fa-check"></i><b>25.3.5</b> e. Predicting more than 2 outcomes</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="other-models.html"><a href="other-models.html#recommended-resources-23"><i class="fa fa-check"></i><b>25.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="cross-validation.html"><a href="cross-validation.html"><i class="fa fa-check"></i><b>26</b> Cross Validation</a>
<ul>
<li class="chapter" data-level="26.1" data-path="cross-validation.html"><a href="cross-validation.html#learning-objectives-24"><i class="fa fa-check"></i><b>26.1</b> Learning objectives</a></li>
<li class="chapter" data-level="26.2" data-path="cross-validation.html"><a href="cross-validation.html#fit-a-model-on-the-entire-dataset"><i class="fa fa-check"></i><b>26.2</b> 1. Fit a model on the entire dataset</a></li>
<li class="chapter" data-level="26.3" data-path="cross-validation.html"><a href="cross-validation.html#train-and-test-a-model"><i class="fa fa-check"></i><b>26.3</b> 2. Train and Test a model</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="cross-validation.html"><a href="cross-validation.html#a.-train-the-model-on-the-train-set"><i class="fa fa-check"></i><b>26.3.1</b> a. Train the model on the train set</a></li>
<li class="chapter" data-level="26.3.2" data-path="cross-validation.html"><a href="cross-validation.html#b.-test-the-model-on-the-test-set"><i class="fa fa-check"></i><b>26.3.2</b> b. Test the model on the test set</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="cross-validation.html"><a href="cross-validation.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>26.4</b> 3. k-fold cross-validation</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="cross-validation.html"><a href="cross-validation.html#a.-define-algorithm"><i class="fa fa-check"></i><b>26.4.1</b> a. Define algorithm</a></li>
<li class="chapter" data-level="26.4.2" data-path="cross-validation.html"><a href="cross-validation.html#b.-create-folds"><i class="fa fa-check"></i><b>26.4.2</b> b. Create folds</a></li>
<li class="chapter" data-level="26.4.3" data-path="cross-validation.html"><a href="cross-validation.html#c.-repeat-the-process"><i class="fa fa-check"></i><b>26.4.3</b> c. Repeat the process</a></li>
<li class="chapter" data-level="26.4.4" data-path="cross-validation.html"><a href="cross-validation.html#d.-evaluate-average-performance"><i class="fa fa-check"></i><b>26.4.4</b> d. Evaluate average performance</a></li>
</ul></li>
<li class="chapter" data-level="26.5" data-path="cross-validation.html"><a href="cross-validation.html#recommended-resources-24"><i class="fa fa-check"></i><b>26.5</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>27</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="27.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#learning-objectives-25"><i class="fa fa-check"></i><b>27.1</b> Learning objectives</a></li>
<li class="chapter" data-level="27.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#distances"><i class="fa fa-check"></i><b>27.2</b> 1. Distances</a>
<ul>
<li class="chapter" data-level="27.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#a.-euclidean-distance"><i class="fa fa-check"></i><b>27.2.1</b> a. Euclidean distance</a></li>
<li class="chapter" data-level="27.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#b.-scaling"><i class="fa fa-check"></i><b>27.2.2</b> b. Scaling</a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#correlation"><i class="fa fa-check"></i><b>27.3</b> 2. Correlation</a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#a.-correlation-coefficient"><i class="fa fa-check"></i><b>27.3.1</b> a. Correlation Coefficient</a></li>
<li class="chapter" data-level="27.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#b.-correlation-matrix"><i class="fa fa-check"></i><b>27.3.2</b> b. Correlation Matrix</a></li>
<li class="chapter" data-level="27.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#c.-combining-variables"><i class="fa fa-check"></i><b>27.3.3</b> c. Combining variables</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#recommended-resources-25"><i class="fa fa-check"></i><b>27.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="dimension-reduction.html"><a href="dimension-reduction.html"><i class="fa fa-check"></i><b>28</b> Dimension Reduction</a>
<ul>
<li class="chapter" data-level="28.1" data-path="dimension-reduction.html"><a href="dimension-reduction.html#learning-objectives-26"><i class="fa fa-check"></i><b>28.1</b> Learning objectives</a></li>
<li class="chapter" data-level="28.2" data-path="dimension-reduction.html"><a href="dimension-reduction.html#principal-component-analysis"><i class="fa fa-check"></i><b>28.2</b> 1. Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="28.2.1" data-path="dimension-reduction.html"><a href="dimension-reduction.html#a.-prepare-the-dataset-and-explore-correlations"><i class="fa fa-check"></i><b>28.2.1</b> a. Prepare the dataset and explore correlations</a></li>
<li class="chapter" data-level="28.2.2" data-path="dimension-reduction.html"><a href="dimension-reduction.html#b.-perform-pca"><i class="fa fa-check"></i><b>28.2.2</b> b. Perform PCA</a></li>
<li class="chapter" data-level="28.2.3" data-path="dimension-reduction.html"><a href="dimension-reduction.html#c.-choose-the-number-of-principal-components"><i class="fa fa-check"></i><b>28.2.3</b> c. Choose the number of principal components</a></li>
<li class="chapter" data-level="28.2.4" data-path="dimension-reduction.html"><a href="dimension-reduction.html#d.-interpret-componentsdimensions"><i class="fa fa-check"></i><b>28.2.4</b> d. Interpret components/dimensions</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="dimension-reduction.html"><a href="dimension-reduction.html#some-considerations-for-using-pca"><i class="fa fa-check"></i><b>28.3</b> 2. Some considerations for using PCA</a></li>
<li class="chapter" data-level="28.4" data-path="dimension-reduction.html"><a href="dimension-reduction.html#recommended-resources-26"><i class="fa fa-check"></i><b>28.4</b> Recommended Resources</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>29</b> Clustering</a>
<ul>
<li class="chapter" data-level="29.1" data-path="clustering.html"><a href="clustering.html#learning-objectives-27"><i class="fa fa-check"></i><b>29.1</b> Learning objectives</a></li>
<li class="chapter" data-level="29.2" data-path="clustering.html"><a href="clustering.html#clustering-1"><i class="fa fa-check"></i><b>29.2</b> 1. Clustering</a>
<ul>
<li class="chapter" data-level="29.2.1" data-path="clustering.html"><a href="clustering.html#a.-prepare-the-data"><i class="fa fa-check"></i><b>29.2.1</b> a. Prepare the data</a></li>
<li class="chapter" data-level="29.2.2" data-path="clustering.html"><a href="clustering.html#b.-apply-the-algorithm"><i class="fa fa-check"></i><b>29.2.2</b> b. Apply the algorithm</a></li>
<li class="chapter" data-level="29.2.3" data-path="clustering.html"><a href="clustering.html#c.-visualize-and-interpret-the-clusters"><i class="fa fa-check"></i><b>29.2.3</b> c. Visualize and interpret the clusters</a></li>
<li class="chapter" data-level="29.2.4" data-path="clustering.html"><a href="clustering.html#d.-choose-the-number-of-clusters"><i class="fa fa-check"></i><b>29.2.4</b> d. Choose the number of clusters</a></li>
</ul></li>
<li class="chapter" data-level="29.3" data-path="clustering.html"><a href="clustering.html#include-more-variables-in-clustering"><i class="fa fa-check"></i><b>29.3</b> 2. Include more variables in clustering</a></li>
<li class="chapter" data-level="29.4" data-path="clustering.html"><a href="clustering.html#your-turn-4"><i class="fa fa-check"></i><b>29.4</b> <strong>Your turn!</strong></a></li>
<li class="chapter" data-level="29.5" data-path="clustering.html"><a href="clustering.html#recommended-resources-27"><i class="fa fa-check"></i><b>29.5</b> Recommended Resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spring 2025 Semester</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cross-validation" class="section level1 hasAnchor" number="26">
<h1><span class="header-section-number">26</span> Cross Validation<a href="cross-validation.html#cross-validation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<hr />
<div id="learning-objectives-24" class="section level2 hasAnchor" number="26.1">
<h2><span class="header-section-number">26.1</span> Learning objectives<a href="cross-validation.html#learning-objectives-24" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Understand the purpose of cross-validation and how it helps assess model generalizability.</li>
<li>Split data into training and test sets, and evaluate performance on both.</li>
<li>Implement and interpret k-fold cross-validation.</li>
</ol>
<hr />
<p>Start the workflow by uploading the necessary packages:</p>
<div class="sourceCode" id="cb771"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb771-1"><a href="cross-validation.html#cb771-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb771-2"><a href="cross-validation.html#cb771-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb771-3"><a href="cross-validation.html#cb771-3" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb771-4"><a href="cross-validation.html#cb771-4" tabindex="-1"></a><span class="fu">library</span>(plotROC)</span></code></pre></div>
<p>Recall the <code>titanic_dataset</code>, which contains information about passengers of the Titanic.</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="cross-validation.html#cb772-1" tabindex="-1"></a><span class="co"># Upload the data from GitHub</span></span>
<span id="cb772-2"><a href="cross-validation.html#cb772-2" tabindex="-1"></a>titanic_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/laylaguyot/datasets/main//titanic_dataset.csv&quot;</span>)</span>
<span id="cb772-3"><a href="cross-validation.html#cb772-3" tabindex="-1"></a></span>
<span id="cb772-4"><a href="cross-validation.html#cb772-4" tabindex="-1"></a><span class="co"># Take a quick look</span></span>
<span id="cb772-5"><a href="cross-validation.html#cb772-5" tabindex="-1"></a><span class="fu">head</span>(titanic_dataset)</span></code></pre></div>
<p>We will continue looking at two potential outcomes in this dataset: predicting the <code>Fare</code> paid or predicting if a passenger <code>Survived</code>. Some variables cannot be used in the model because they are too specific to each passenger: <code>PassengerId</code>, <code>Name</code>, <code>Ticket</code>, and <code>Cabin</code>. Let’s keep <code>PassengerId</code> to identify unique rows but remove other variables from the dataset. Also, let’s ignore missing values for now since they would be excluded from modeling:</p>
<div class="sourceCode" id="cb773"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb773-1"><a href="cross-validation.html#cb773-1" tabindex="-1"></a><span class="co"># Prepare the dataset for modeling</span></span>
<span id="cb773-2"><a href="cross-validation.html#cb773-2" tabindex="-1"></a>titanic_modeling <span class="ot">&lt;-</span> titanic_dataset <span class="sc">|&gt;</span></span>
<span id="cb773-3"><a href="cross-validation.html#cb773-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Name, <span class="sc">-</span>Ticket, <span class="sc">-</span>Cabin) <span class="sc">|&gt;</span></span>
<span id="cb773-4"><a href="cross-validation.html#cb773-4" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb773-5"><a href="cross-validation.html#cb773-5" tabindex="-1"></a></span>
<span id="cb773-6"><a href="cross-validation.html#cb773-6" tabindex="-1"></a><span class="co"># New dimensions</span></span>
<span id="cb773-7"><a href="cross-validation.html#cb773-7" tabindex="-1"></a><span class="fu">dim</span>(titanic_modeling)</span></code></pre></div>
<pre><code>## [1] 712   9</code></pre>
<p>Less rows!</p>
</div>
<div id="fit-a-model-on-the-entire-dataset" class="section level2 hasAnchor" number="26.2">
<h2><span class="header-section-number">26.2</span> 1. Fit a model on the entire dataset<a href="cross-validation.html#fit-a-model-on-the-entire-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the last worksheet, we considered a model to predict if a passenger survived based solely on the passenger’s class. Let’s take a look at using a logistic regression model:</p>
<div class="sourceCode" id="cb775"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb775-1"><a href="cross-validation.html#cb775-1" tabindex="-1"></a><span class="co"># Fit a logistic regression model</span></span>
<span id="cb775-2"><a href="cross-validation.html#cb775-2" tabindex="-1"></a>fit_log <span class="ot">&lt;-</span> <span class="fu">glm</span>(Survived <span class="sc">~</span> Pclass, <span class="at">data =</span> titanic_modeling, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>)</span>
<span id="cb775-3"><a href="cross-validation.html#cb775-3" tabindex="-1"></a></span>
<span id="cb775-4"><a href="cross-validation.html#cb775-4" tabindex="-1"></a><span class="co"># Calculate performance with AUC</span></span>
<span id="cb775-5"><a href="cross-validation.html#cb775-5" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(titanic_modeling) <span class="sc">+</span> </span>
<span id="cb775-6"><a href="cross-validation.html#cb775-6" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb775-7"><a href="cross-validation.html#cb775-7" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb775-8"><a href="cross-validation.html#cb775-8" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb775-9"><a href="cross-validation.html#cb775-9" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb775-10"><a href="cross-validation.html#cb775-10" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(fit_log, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)))</span>
<span id="cb775-11"><a href="cross-validation.html#cb775-11" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.693298</code></pre>
<p>The model is pretty bad at predicting if a passenger survived or not… What if we considered more predictors?</p>
<div id="try-it-include-all-predictors-that-make-sense-in-this-context.-has-the-performance-of-the-logistic-regression-model-improved" class="section level4 hasAnchor" number="26.2.0.1">
<h4><span class="header-section-number">26.2.0.1</span> <strong>Try it! Include all predictors that make sense in this context. Has the performance of the logistic regression model improved?</strong><a href="cross-validation.html#try-it-include-all-predictors-that-make-sense-in-this-context.-has-the-performance-of-the-logistic-regression-model-improved" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb777"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb777-1"><a href="cross-validation.html#cb777-1" tabindex="-1"></a><span class="co"># Fit a logistic regression model</span></span>
<span id="cb777-2"><a href="cross-validation.html#cb777-2" tabindex="-1"></a>fit_log <span class="ot">&lt;-</span> <span class="fu">glm</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked, </span>
<span id="cb777-3"><a href="cross-validation.html#cb777-3" tabindex="-1"></a>               <span class="at">data =</span> titanic_modeling, </span>
<span id="cb777-4"><a href="cross-validation.html#cb777-4" tabindex="-1"></a>               <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>)</span>
<span id="cb777-5"><a href="cross-validation.html#cb777-5" tabindex="-1"></a></span>
<span id="cb777-6"><a href="cross-validation.html#cb777-6" tabindex="-1"></a><span class="co"># Calculate performance with AUC</span></span>
<span id="cb777-7"><a href="cross-validation.html#cb777-7" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(titanic_modeling) <span class="sc">+</span> </span>
<span id="cb777-8"><a href="cross-validation.html#cb777-8" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb777-9"><a href="cross-validation.html#cb777-9" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb777-10"><a href="cross-validation.html#cb777-10" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb777-11"><a href="cross-validation.html#cb777-11" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb777-12"><a href="cross-validation.html#cb777-12" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(fit_log, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)))</span>
<span id="cb777-13"><a href="cross-validation.html#cb777-13" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.8601939</code></pre>
<p><strong>Yes, the performance has improved!</strong></p>
<p>However, we discussed that adding many predictors could overspecify the model: if the model is too specific to the particular data, it would not be able to make appropriate predictions on new data. That’s why we want to test the performance of our model with cross-validation. The principle of cross-validation is to train a model on some data and test the model’s performance on “new” data. Since we can’t reproduce the sinking of the Titanic, we will use the data available and split it as a <em>train</em> set and a <em>test</em> set.</p>
</div>
</div>
<div id="train-and-test-a-model" class="section level2 hasAnchor" number="26.3">
<h2><span class="header-section-number">26.3</span> 2. Train and Test a model<a href="cross-validation.html#train-and-test-a-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s separate our entire dataset into a <code>train</code> dataset and a <code>test</code> dataset (representing about 70% and 30% of the entire dataset, respectively):</p>
<div class="sourceCode" id="cb779"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb779-1"><a href="cross-validation.html#cb779-1" tabindex="-1"></a><span class="co"># Sample 70% of the dataset into the train set</span></span>
<span id="cb779-2"><a href="cross-validation.html#cb779-2" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> <span class="fu">sample_frac</span>(titanic_modeling, <span class="fl">0.7</span>)</span>
<span id="cb779-3"><a href="cross-validation.html#cb779-3" tabindex="-1"></a></span>
<span id="cb779-4"><a href="cross-validation.html#cb779-4" tabindex="-1"></a><span class="co"># Get the rest of the dataset into the test set</span></span>
<span id="cb779-5"><a href="cross-validation.html#cb779-5" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(titanic_modeling, train_data, <span class="at">by =</span> <span class="st">&quot;PassengerId&quot;</span>)</span></code></pre></div>
<div id="a.-train-the-model-on-the-train-set" class="section level3 hasAnchor" number="26.3.1">
<h3><span class="header-section-number">26.3.1</span> a. Train the model on the train set<a href="cross-validation.html#a.-train-the-model-on-the-train-set" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s consider the logistic regression model to predict the fare paid by a passenger based on multiple predictors:</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="cross-validation.html#cb780-1" tabindex="-1"></a><span class="co"># Fit a logistic regression model on train data</span></span>
<span id="cb780-2"><a href="cross-validation.html#cb780-2" tabindex="-1"></a>train_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked, </span>
<span id="cb780-3"><a href="cross-validation.html#cb780-3" tabindex="-1"></a>                   <span class="at">data =</span> train_data, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>)</span></code></pre></div>
<p>Since the train model is fitted on the train data, <code>train_model</code> is the best model to fit the train data.</p>
<div class="sourceCode" id="cb781"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb781-1"><a href="cross-validation.html#cb781-1" tabindex="-1"></a><span class="co"># Calculate performance on train data with AUC</span></span>
<span id="cb781-2"><a href="cross-validation.html#cb781-2" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(train_data) <span class="sc">+</span> </span>
<span id="cb781-3"><a href="cross-validation.html#cb781-3" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb781-4"><a href="cross-validation.html#cb781-4" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb781-5"><a href="cross-validation.html#cb781-5" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb781-6"><a href="cross-validation.html#cb781-6" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb781-7"><a href="cross-validation.html#cb781-7" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(train_model, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)))</span>
<span id="cb781-8"><a href="cross-validation.html#cb781-8" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.8637815</code></pre>
<p>Do well all get the same AUC value? Why or why not?</p>
<p><strong>The train data and test data were split randomly: we don’t actually have the same train data so that means we also don’t have the same model!</strong></p>
<p>But how does this model work on “new” data? We will compare the performance of <code>train_model</code> on the train data with the performance on the test data.</p>
</div>
<div id="b.-test-the-model-on-the-test-set" class="section level3 hasAnchor" number="26.3.2">
<h3><span class="header-section-number">26.3.2</span> b. Test the model on the test set<a href="cross-validation.html#b.-test-the-model-on-the-test-set" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s compare the performance of the model on the train data vs the performance on the test data for predicting if a passenger survived or not:</p>
<div class="sourceCode" id="cb783"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb783-1"><a href="cross-validation.html#cb783-1" tabindex="-1"></a><span class="co"># Calculate performance on test data with AUC</span></span>
<span id="cb783-2"><a href="cross-validation.html#cb783-2" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(test_data) <span class="sc">+</span> </span>
<span id="cb783-3"><a href="cross-validation.html#cb783-3" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb783-4"><a href="cross-validation.html#cb783-4" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb783-5"><a href="cross-validation.html#cb783-5" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb783-6"><a href="cross-validation.html#cb783-6" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb783-7"><a href="cross-validation.html#cb783-7" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(train_model, <span class="at">newdata =</span> test_data, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)))</span>
<span id="cb783-8"><a href="cross-validation.html#cb783-8" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.8493587</code></pre>
<p>How does the model’s performance differ between the training and test data?</p>
<p><strong>Different answers are possible depending on AUC values (recall that the higher the AUC value, the better the performance is):</strong></p>
<ul>
<li><p><strong>if the AUC value is higher for the test dataset: the performance of the model is better for new data.</strong></p></li>
<li><p><strong>if the AUC value is lower for the test dataset: the performance of the model is worse for new data.</strong></p></li>
<li><p><strong>if the AUC value is about the same on both datasets: the performance of the model is stable for new data.</strong></p></li>
</ul>
<div id="try-it-what-if-you-tried-the-decision-tree-model-using-the-same-predictors-how-does-it-perform-on-the-entire-dataset-how-does-it-perform-on-new-data" class="section level4 hasAnchor" number="26.3.2.1">
<h4><span class="header-section-number">26.3.2.1</span> <strong>Try it! What if you tried the decision tree model using the same predictors? How does it perform on the entire dataset? How does it perform on new data?</strong><a href="cross-validation.html#try-it-what-if-you-tried-the-decision-tree-model-using-the-same-predictors-how-does-it-perform-on-the-entire-dataset-how-does-it-perform-on-new-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb785"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb785-1"><a href="cross-validation.html#cb785-1" tabindex="-1"></a><span class="co"># Fit the decision tree model</span></span>
<span id="cb785-2"><a href="cross-validation.html#cb785-2" tabindex="-1"></a>fit_tree <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb785-3"><a href="cross-validation.html#cb785-3" tabindex="-1"></a>                  <span class="at">data =</span> titanic_modeling,</span>
<span id="cb785-4"><a href="cross-validation.html#cb785-4" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb785-5"><a href="cross-validation.html#cb785-5" tabindex="-1"></a></span>
<span id="cb785-6"><a href="cross-validation.html#cb785-6" tabindex="-1"></a><span class="co"># Calculate performance on train data with AUC</span></span>
<span id="cb785-7"><a href="cross-validation.html#cb785-7" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(titanic_modeling) <span class="sc">+</span> </span>
<span id="cb785-8"><a href="cross-validation.html#cb785-8" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb785-9"><a href="cross-validation.html#cb785-9" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb785-10"><a href="cross-validation.html#cb785-10" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb785-11"><a href="cross-validation.html#cb785-11" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb785-12"><a href="cross-validation.html#cb785-12" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(fit_tree, <span class="at">newdata =</span> titanic_modeling)[ ,<span class="dv">2</span>]))</span>
<span id="cb785-13"><a href="cross-validation.html#cb785-13" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.8367892</code></pre>
<div class="sourceCode" id="cb787"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb787-1"><a href="cross-validation.html#cb787-1" tabindex="-1"></a><span class="co"># Fit the decision tree model</span></span>
<span id="cb787-2"><a href="cross-validation.html#cb787-2" tabindex="-1"></a>train_model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Embarked,</span>
<span id="cb787-3"><a href="cross-validation.html#cb787-3" tabindex="-1"></a>                    <span class="at">data =</span> train_data,</span>
<span id="cb787-4"><a href="cross-validation.html#cb787-4" tabindex="-1"></a>                    <span class="at">method =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb787-5"><a href="cross-validation.html#cb787-5" tabindex="-1"></a></span>
<span id="cb787-6"><a href="cross-validation.html#cb787-6" tabindex="-1"></a><span class="co"># Calculate performance on test data with AUC</span></span>
<span id="cb787-7"><a href="cross-validation.html#cb787-7" tabindex="-1"></a>ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(test_data) <span class="sc">+</span> </span>
<span id="cb787-8"><a href="cross-validation.html#cb787-8" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb787-9"><a href="cross-validation.html#cb787-9" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb787-10"><a href="cross-validation.html#cb787-10" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb787-11"><a href="cross-validation.html#cb787-11" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb787-12"><a href="cross-validation.html#cb787-12" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(train_model, <span class="at">newdata =</span> test_data)[ ,<span class="dv">2</span>]))</span>
<span id="cb787-13"><a href="cross-validation.html#cb787-13" tabindex="-1"></a><span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span></code></pre></div>
<pre><code>## [1] 0.768023</code></pre>
<p><strong>Compare if the AUC value is lower/higher for the performance on the test dataset.</strong></p>
</div>
</div>
</div>
<div id="k-fold-cross-validation" class="section level2 hasAnchor" number="26.4">
<h2><span class="header-section-number">26.4</span> 3. k-fold cross-validation<a href="cross-validation.html#k-fold-cross-validation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Previously, our results for comparing the performance might differ based on which <code>train</code> data and <code>test</code> data we considered. Let’s try the k-fold cross-validation to repeat this process.</p>
<div id="a.-define-algorithm" class="section level3 hasAnchor" number="26.4.1">
<h3><span class="header-section-number">26.4.1</span> a. Define algorithm<a href="cross-validation.html#a.-define-algorithm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Algorithm for k-fold cross-validation:</p>
<ul>
<li><p>Divide datasets into <em>k</em> equal parts (usually 5 or 10)</p></li>
<li><p>Use <em>k</em>−1 parts as the <code>train</code> data</p></li>
<li><p>Test the model on the remaining part, the <code>test</code> data</p></li>
<li><p>Repeat <em>k</em> times, so each part has been used once as a test data</p></li>
<li><p>Average performance over <em>k</em> performances</p></li>
</ul>
</div>
<div id="b.-create-folds" class="section level3 hasAnchor" number="26.4.2">
<h3><span class="header-section-number">26.4.2</span> b. Create folds<a href="cross-validation.html#b.-create-folds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we will create the different <em>folds</em>:</p>
<div class="sourceCode" id="cb789"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb789-1"><a href="cross-validation.html#cb789-1" tabindex="-1"></a><span class="co"># Choose number of folds</span></span>
<span id="cb789-2"><a href="cross-validation.html#cb789-2" tabindex="-1"></a>k <span class="ot">=</span> <span class="dv">5</span> </span>
<span id="cb789-3"><a href="cross-validation.html#cb789-3" tabindex="-1"></a></span>
<span id="cb789-4"><a href="cross-validation.html#cb789-4" tabindex="-1"></a><span class="co"># To have the same random sample, use set.seed</span></span>
<span id="cb789-5"><a href="cross-validation.html#cb789-5" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">322</span>)</span>
<span id="cb789-6"><a href="cross-validation.html#cb789-6" tabindex="-1"></a></span>
<span id="cb789-7"><a href="cross-validation.html#cb789-7" tabindex="-1"></a><span class="co"># Randomly order rows in the dataset</span></span>
<span id="cb789-8"><a href="cross-validation.html#cb789-8" tabindex="-1"></a>shuffled_data <span class="ot">&lt;-</span> titanic_modeling[<span class="fu">sample</span>(<span class="fu">nrow</span>(titanic_modeling)), ] </span>
<span id="cb789-9"><a href="cross-validation.html#cb789-9" tabindex="-1"></a></span>
<span id="cb789-10"><a href="cross-validation.html#cb789-10" tabindex="-1"></a><span class="co"># Create k folds in the dataset</span></span>
<span id="cb789-11"><a href="cross-validation.html#cb789-11" tabindex="-1"></a>shuffled_data <span class="ot">&lt;-</span> titanic_modeling <span class="sc">|&gt;</span></span>
<span id="cb789-12"><a href="cross-validation.html#cb789-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">folds =</span> <span class="fu">cut</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(shuffled_data)), <span class="at">breaks =</span> k, <span class="at">labels =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<div id="try-it-check-how-many-observations-are-in-each-fold." class="section level4 hasAnchor" number="26.4.2.1">
<h4><span class="header-section-number">26.4.2.1</span> <strong>Try it! Check how many observations are in each fold.</strong><a href="cross-validation.html#try-it-check-how-many-observations-are-in-each-fold." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="cross-validation.html#cb790-1" tabindex="-1"></a><span class="co"># Find frequencies of folds</span></span>
<span id="cb790-2"><a href="cross-validation.html#cb790-2" tabindex="-1"></a><span class="fu">table</span>(shuffled_data<span class="sc">$</span>folds)</span></code></pre></div>
<pre><code>## 
##   1   2   3   4   5 
## 143 142 142 142 143</code></pre>
<p><strong>About the same number of observations are in each fold.</strong></p>
</div>
</div>
<div id="c.-repeat-the-process" class="section level3 hasAnchor" number="26.4.3">
<h3><span class="header-section-number">26.4.3</span> c. Repeat the process<a href="cross-validation.html#c.-repeat-the-process" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can focus on each fold at a time, repeating the same process by using a for-loop. For example:</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="cross-validation.html#cb792-1" tabindex="-1"></a><span class="co"># Use a for-loop to keep track of the size of the train data</span></span>
<span id="cb792-2"><a href="cross-validation.html#cb792-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k){</span>
<span id="cb792-3"><a href="cross-validation.html#cb792-3" tabindex="-1"></a>  train_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">!=</span> i) <span class="co"># train data = all observations except in fold i</span></span>
<span id="cb792-4"><a href="cross-validation.html#cb792-4" tabindex="-1"></a>  <span class="co"># Find number of rows</span></span>
<span id="cb792-5"><a href="cross-validation.html#cb792-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">nrow</span>(train_i))</span>
<span id="cb792-6"><a href="cross-validation.html#cb792-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 569
## [1] 570
## [1] 570
## [1] 570
## [1] 569</code></pre>
<p>We can keep track of the size of each fold to train the data by saving each value in a vector:</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="cross-validation.html#cb794-1" tabindex="-1"></a><span class="co"># Initialize a vector to keep track of the size of the train data</span></span>
<span id="cb794-2"><a href="cross-validation.html#cb794-2" tabindex="-1"></a>n_train <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb794-3"><a href="cross-validation.html#cb794-3" tabindex="-1"></a></span>
<span id="cb794-4"><a href="cross-validation.html#cb794-4" tabindex="-1"></a><span class="co"># Use a for-loop to get performance for each k-fold</span></span>
<span id="cb794-5"><a href="cross-validation.html#cb794-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k){</span>
<span id="cb794-6"><a href="cross-validation.html#cb794-6" tabindex="-1"></a>  train_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">!=</span> i) <span class="co"># train data = all observations except in fold i</span></span>
<span id="cb794-7"><a href="cross-validation.html#cb794-7" tabindex="-1"></a>  <span class="co"># Save number of rows</span></span>
<span id="cb794-8"><a href="cross-validation.html#cb794-8" tabindex="-1"></a>  n_train[i] <span class="ot">&lt;-</span> <span class="fu">nrow</span>(train_i)</span>
<span id="cb794-9"><a href="cross-validation.html#cb794-9" tabindex="-1"></a>}</span>
<span id="cb794-10"><a href="cross-validation.html#cb794-10" tabindex="-1"></a></span>
<span id="cb794-11"><a href="cross-validation.html#cb794-11" tabindex="-1"></a><span class="co"># Check that object</span></span>
<span id="cb794-12"><a href="cross-validation.html#cb794-12" tabindex="-1"></a>n_train</span></code></pre></div>
<pre><code>## [1] 569 570 570 570 569</code></pre>
</div>
<div id="d.-evaluate-average-performance" class="section level3 hasAnchor" number="26.4.4">
<h3><span class="header-section-number">26.4.4</span> d. Evaluate average performance<a href="cross-validation.html#d.-evaluate-average-performance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now putting it together: we fit a model on each train data (all but the i-th fold) and evaluate the performance on the corresponding test data (the i-th fold) and repeat the process for each <em>k</em>-fold (using a for-loop):</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="cross-validation.html#cb796-1" tabindex="-1"></a><span class="co"># Initialize a vector to keep track of the performance for each k-fold</span></span>
<span id="cb796-2"><a href="cross-validation.html#cb796-2" tabindex="-1"></a>perf_k <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb796-3"><a href="cross-validation.html#cb796-3" tabindex="-1"></a></span>
<span id="cb796-4"><a href="cross-validation.html#cb796-4" tabindex="-1"></a><span class="co"># Use a for-loop to get performance for each k-fold</span></span>
<span id="cb796-5"><a href="cross-validation.html#cb796-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k){</span>
<span id="cb796-6"><a href="cross-validation.html#cb796-6" tabindex="-1"></a>  <span class="co"># Split data into train and test data</span></span>
<span id="cb796-7"><a href="cross-validation.html#cb796-7" tabindex="-1"></a>  train_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">!=</span> i) <span class="co"># train data = all observations except in fold i</span></span>
<span id="cb796-8"><a href="cross-validation.html#cb796-8" tabindex="-1"></a>  test_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">==</span> i)  <span class="co"># test data = observations in fold i</span></span>
<span id="cb796-9"><a href="cross-validation.html#cb796-9" tabindex="-1"></a>  </span>
<span id="cb796-10"><a href="cross-validation.html#cb796-10" tabindex="-1"></a>  <span class="co"># Train model on train data (all but fold i)</span></span>
<span id="cb796-11"><a href="cross-validation.html#cb796-11" tabindex="-1"></a>  <span class="co"># CHANGE: what model/predictors should be included</span></span>
<span id="cb796-12"><a href="cross-validation.html#cb796-12" tabindex="-1"></a>  train_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb796-13"><a href="cross-validation.html#cb796-13" tabindex="-1"></a>                     <span class="at">data =</span> train_i,</span>
<span id="cb796-14"><a href="cross-validation.html#cb796-14" tabindex="-1"></a>                     <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>)</span>
<span id="cb796-15"><a href="cross-validation.html#cb796-15" tabindex="-1"></a>  </span>
<span id="cb796-16"><a href="cross-validation.html#cb796-16" tabindex="-1"></a>  <span class="co"># Performance listed for each test data = fold i</span></span>
<span id="cb796-17"><a href="cross-validation.html#cb796-17" tabindex="-1"></a>  <span class="co"># CHANGE: how the performance is calculated</span></span>
<span id="cb796-18"><a href="cross-validation.html#cb796-18" tabindex="-1"></a>  ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(test_i) <span class="sc">+</span> </span>
<span id="cb796-19"><a href="cross-validation.html#cb796-19" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb796-20"><a href="cross-validation.html#cb796-20" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb796-21"><a href="cross-validation.html#cb796-21" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb796-22"><a href="cross-validation.html#cb796-22" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb796-23"><a href="cross-validation.html#cb796-23" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(train_model, <span class="at">newdata =</span> test_i, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)))</span>
<span id="cb796-24"><a href="cross-validation.html#cb796-24" tabindex="-1"></a>  <span class="co"># Save the AUC values</span></span>
<span id="cb796-25"><a href="cross-validation.html#cb796-25" tabindex="-1"></a>  perf_k[i] <span class="ot">&lt;-</span> <span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span>
<span id="cb796-26"><a href="cross-validation.html#cb796-26" tabindex="-1"></a>}</span>
<span id="cb796-27"><a href="cross-validation.html#cb796-27" tabindex="-1"></a></span>
<span id="cb796-28"><a href="cross-validation.html#cb796-28" tabindex="-1"></a><span class="co"># Performance for each fold </span></span>
<span id="cb796-29"><a href="cross-validation.html#cb796-29" tabindex="-1"></a>perf_k</span></code></pre></div>
<pre><code>## [1] 0.8193297 0.8451548 0.8482017 0.8452236 0.8797209</code></pre>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="cross-validation.html#cb798-1" tabindex="-1"></a><span class="co"># Average performance over all k folds</span></span>
<span id="cb798-2"><a href="cross-validation.html#cb798-2" tabindex="-1"></a><span class="fu">mean</span>(perf_k)</span></code></pre></div>
<pre><code>## [1] 0.8475261</code></pre>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="cross-validation.html#cb800-1" tabindex="-1"></a><span class="fu">sd</span>(perf_k)</span></code></pre></div>
<pre><code>## [1] 0.02146464</code></pre>
<p>What does the comparison of performances across <em>k</em> folds tell us?</p>
<ul>
<li><p>if the performance is consistently good (high mean, low sd), the model is likely to generalize well to “new” data.</p></li>
<li><p>if the performance is consistently bad (low mean, low sd), the model might be underfitting.</p></li>
<li><p>if the performance varies a lot across the cross-validation folds (high sd), the model might be overfitting.</p></li>
</ul>
<div id="try-it-evaluate-the-performance-of-the-decision-tree-model-with-cross-validation-adding-all-predictors-that-make-sense-to-predict-if-a-passenger-survived-or-not.-how-is-the-average-performance-does-it-vary-much-from-fold-to-fold" class="section level4 hasAnchor" number="26.4.4.1">
<h4><span class="header-section-number">26.4.4.1</span> <strong>Try it! Evaluate the performance of the decision tree model with cross-validation, adding all predictors that make sense to predict if a passenger survived or not. How is the average performance? does it vary much from fold to fold?</strong><a href="cross-validation.html#try-it-evaluate-the-performance-of-the-decision-tree-model-with-cross-validation-adding-all-predictors-that-make-sense-to-predict-if-a-passenger-survived-or-not.-how-is-the-average-performance-does-it-vary-much-from-fold-to-fold" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="cross-validation.html#cb802-1" tabindex="-1"></a><span class="co"># Initialize a vector to keep track of the performance for each k-fold</span></span>
<span id="cb802-2"><a href="cross-validation.html#cb802-2" tabindex="-1"></a>perf_k <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb802-3"><a href="cross-validation.html#cb802-3" tabindex="-1"></a></span>
<span id="cb802-4"><a href="cross-validation.html#cb802-4" tabindex="-1"></a><span class="co"># Use a for-loop to get performance for each k-fold</span></span>
<span id="cb802-5"><a href="cross-validation.html#cb802-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k){</span>
<span id="cb802-6"><a href="cross-validation.html#cb802-6" tabindex="-1"></a>  <span class="co"># Split data into train and test data</span></span>
<span id="cb802-7"><a href="cross-validation.html#cb802-7" tabindex="-1"></a>  train_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">!=</span> i) <span class="co"># train data = all observations except in fold i</span></span>
<span id="cb802-8"><a href="cross-validation.html#cb802-8" tabindex="-1"></a>  test_i <span class="ot">&lt;-</span> shuffled_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(folds <span class="sc">==</span> i)  <span class="co"># test data = observations in fold i</span></span>
<span id="cb802-9"><a href="cross-validation.html#cb802-9" tabindex="-1"></a>  </span>
<span id="cb802-10"><a href="cross-validation.html#cb802-10" tabindex="-1"></a>  <span class="co"># Train model on train data (all but fold i)</span></span>
<span id="cb802-11"><a href="cross-validation.html#cb802-11" tabindex="-1"></a>  <span class="co"># CHANGE: what model/predictors should be included</span></span>
<span id="cb802-12"><a href="cross-validation.html#cb802-12" tabindex="-1"></a>  train_model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Embarked,</span>
<span id="cb802-13"><a href="cross-validation.html#cb802-13" tabindex="-1"></a>                    <span class="at">data =</span> train_i,</span>
<span id="cb802-14"><a href="cross-validation.html#cb802-14" tabindex="-1"></a>                    <span class="at">method =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb802-15"><a href="cross-validation.html#cb802-15" tabindex="-1"></a>  </span>
<span id="cb802-16"><a href="cross-validation.html#cb802-16" tabindex="-1"></a>  <span class="co"># Performance listed for each test data = fold i</span></span>
<span id="cb802-17"><a href="cross-validation.html#cb802-17" tabindex="-1"></a>  <span class="co"># CHANGE: how the performance is calculated</span></span>
<span id="cb802-18"><a href="cross-validation.html#cb802-18" tabindex="-1"></a>  ROC <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(test_i) <span class="sc">+</span> </span>
<span id="cb802-19"><a href="cross-validation.html#cb802-19" tabindex="-1"></a>    <span class="fu">geom_roc</span>(<span class="fu">aes</span>(</span>
<span id="cb802-20"><a href="cross-validation.html#cb802-20" tabindex="-1"></a>      <span class="co"># Outcome is Survived</span></span>
<span id="cb802-21"><a href="cross-validation.html#cb802-21" tabindex="-1"></a>      <span class="at">d =</span> Survived,</span>
<span id="cb802-22"><a href="cross-validation.html#cb802-22" tabindex="-1"></a>      <span class="co"># Probability of surviving based on the logistic model</span></span>
<span id="cb802-23"><a href="cross-validation.html#cb802-23" tabindex="-1"></a>      <span class="at">m =</span> <span class="fu">predict</span>(train_model, <span class="at">newdata =</span> test_i)[ ,<span class="dv">2</span>]))</span>
<span id="cb802-24"><a href="cross-validation.html#cb802-24" tabindex="-1"></a>  <span class="co"># Save the AUC values</span></span>
<span id="cb802-25"><a href="cross-validation.html#cb802-25" tabindex="-1"></a>  perf_k[i] <span class="ot">&lt;-</span> <span class="fu">calc_auc</span>(ROC)<span class="sc">$</span>AUC</span>
<span id="cb802-26"><a href="cross-validation.html#cb802-26" tabindex="-1"></a>}</span>
<span id="cb802-27"><a href="cross-validation.html#cb802-27" tabindex="-1"></a></span>
<span id="cb802-28"><a href="cross-validation.html#cb802-28" tabindex="-1"></a><span class="co"># Performance for each fold </span></span>
<span id="cb802-29"><a href="cross-validation.html#cb802-29" tabindex="-1"></a>perf_k</span></code></pre></div>
<pre><code>## [1] 0.8179522 0.8375624 0.7986739 0.7542683 0.8874179</code></pre>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="cross-validation.html#cb804-1" tabindex="-1"></a><span class="co"># Average performance over all k folds</span></span>
<span id="cb804-2"><a href="cross-validation.html#cb804-2" tabindex="-1"></a><span class="fu">mean</span>(perf_k)</span></code></pre></div>
<pre><code>## [1] 0.819175</code></pre>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="cross-validation.html#cb806-1" tabindex="-1"></a><span class="fu">sd</span>(perf_k)</span></code></pre></div>
<pre><code>## [1] 0.04906593</code></pre>
<p><strong>The average performance on new data is consistently worse than the performance on the entire dataset (see above).</strong></p>
<hr />
<p>What would we need to change in this worksheet if we were predicting the <code>Fare</code> paid by a passenger?</p>
<p><strong>We would need to change the model approach (linear regression or decision tree to predict a numeric outcome). We would also need to change how we evaluate the performance of the model (using RMSE).</strong></p>
<hr />
</div>
</div>
</div>
<div id="recommended-resources-24" class="section level2 hasAnchor" number="26.5">
<h2><span class="header-section-number">26.5</span> Recommended Resources<a href="cross-validation.html#recommended-resources-24" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Worksheet keys are posted at the end of the week on Canvas under <strong>Programming Tools</strong>.</li>
<li>Recommended readings <a href="https://rafalab.dfci.harvard.edu/dsbook/cross-validation.html">Cross validation</a></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="other-models.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="unsupervised-learning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
